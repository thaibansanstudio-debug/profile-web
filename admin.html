<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1463506394585239773/09qcuC4S9jlZNJocIVa5id2BQQObYYeNQj7JPPSu6VWcFFPxY84jX6UVFStNSrLjRTaf";

let login = localStorage.getItem("login");
let users = JSON.parse(localStorage.getItem("users")) || {};

if(!login || !users[login] || users[login].role !== "admin"){
  location.href="login.html";
}

let targetUser = login;
money.innerText = "ðŸ’° " + users[targetUser].money;

function setMoney(){
  let t = target.value;
  if(!users[t]) return alert("à¹„à¸¡à¹ˆà¸žà¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰");
  targetUser = t;
  users[t].money = Number(amount.value);
  logDiscord("SET");
  save();
}

function addMoney(){
  users[targetUser].money += Number(amount.value);
  logDiscord("ADD");
  save();
}

function subMoney(){
  users[targetUser].money -= Number(amount.value);
  logDiscord("SUB");
  save();
}

function save(){
  localStorage.setItem("users",JSON.stringify(users));
  money.innerText = "ðŸ’° " + users[targetUser].money;
}

function logDiscord(type){
  fetch(WEBHOOK_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      embeds:[{
        title:"ðŸ’¸ Admin Money Update",
        color: type==="SET"?5763719:type==="ADD"?3447003:15158332,
        fields:[
          {name:"ðŸ‘® Admin", value:login, inline:true},
          {name:"ðŸ‘¤ User", value:targetUser, inline:true},
          {name:"ðŸ“Œ Action", value:type, inline:true},
          {name:"ðŸ’° New Balance", value:String(users[targetUser].money)}
        ],
        timestamp:new Date()
      }]
    })
  });
}

function logout(){
  localStorage.removeItem("login");
  location.href="login.html";
}
</script>
